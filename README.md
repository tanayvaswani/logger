# Designing Logging Framework in Python

A logging framework is a tool that provides a way to record, format, filter and route log messages generated by an application during execution.

Frameworks like **Log4j**, **SLF4J**, and **java.util.logging** power millions of production services.

## Demo

```python
logger.info("info message")
logger.debug("debug message")
logger.warn("warning message")
```

## Basic Requirements

1. Different Log Levels.
2. Logs with a timestamp, log level, and message content.
3. Support multiple output destinations.
4. Configuration mechanism to set the log level and output destination.
5. Thread safe to handle concurrent logging from multiple threads.
6. Extensible to accommodate new log levels and output destinations in the future.

### Functional Requirements

1. Support for multiple log levels (e.g., DEBUG, INFO, WARNING, ERROR, CRITICAL).
2. Each log entry must include a timestamp, log level, and message content.
3. Ability to log messages to multiple output destinations (e.g., console, file).
4. Provide a configuration mechanism to set log level and output destinations at runtime.
5. Ensure thread safety for concurrent logging from multiple threads.
6. Allow easy extension to add new log levels and output destinations.

### Non Functional Requirements

1. Logging operations should have minimal performance overhead.
2. The framework should be easy to configure and integrate into existing Python applications.
3. Log output should be human-readable and, optionally, machine-parseable (e.g., JSON).
4. The framework should be robust and not lose log messages under high load or in case of errors.
5. Extensibility: Developers should be able to add custom log levels and output handlers with minimal effort.

## Core Entities

A logging framework is built around the right abstractions to provide flexible, extensible, and performant logging.

Core Entities:

### LogLevel

- Enum representing the supported log levels (e.g., DEBUG, INFO, WARNING, ERROR, CRITICAL).

**Responsibility**:

- Defines the severity of log messages and enables filtering based on level.

### LogMessage

**Attributes**:

- `timestamp: datetime` — when the log was created
- `level: LogLevel` — severity of the log
- `message: str` — the log content

**Responsibility**:

- Encapsulates all information for a single log entry.

### LogAppender (Interface)

**Methods**:

- `append(LogMessage message): void` — handles outputting a log message to a destination

**Responsibility**:

- Abstracts the destination for log messages (console, file, etc.).

### ConsoleAppender, FileAppender, DatabaseAppender

- Concrete implementations of LogAppender.

**Responsibility**:

- Output log messages to the console, a file, or a database, respectively.

### LoggerConfig

**Attributes**:

- `level: LogLevel` — minimum log level to output
- `appenders: List[LogAppender]` — destinations for log messages

**Responsibility**:

- Holds configuration for the logger, such as log level and output destinations.

### Logger

Singleton class providing the main logging API.

**Methods**:

- `set_config(LoggerConfig config): void` — updates logger settings
- `log(level, message): void` — logs a message at a given level
- `info/debug/warning/error/critical(message): void` — convenience methods for each log level

**Responsibility**:

- Manages logging logic, applies configuration, and routes messages to appenders.
